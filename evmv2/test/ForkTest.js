
let { BigNumber } = require("ethers");
const { expect } = require("chai");
const { ethers, network } = require("hardhat");

let ERC20 = [
    "function approve(address spender, uint256 amount) external returns (bool)",
    "function balanceOf(address account) external view returns (uint256)",
    "function transfer(address to, uint value) external returns (bool)",
];

//fork merlin 
// to execute this modify block.chainid = 4200 in MAPOmnichainServiceV2.sol
// because fork chainId Cannot be set to 4200
describe("swapIn", function () {

    //
    it("swapIn", async () => {
        let user;

        this.timeout(0);
        await network.provider.request({
            method: "hardhat_reset",
            params: [
                {
                    forking: {
                        jsonRpcUrl: "https://ro-rpc.merlinchain.io/",
                        blockNumber: 7520112,
                    },
                },
            ],
        });

        await network.provider.request({
            method: "hardhat_impersonateAccount",
            params: ["0xbbcfbbecc798ae9941104b0f6991134439c1c426"],
        });
        user = await ethers.getSigner("0xBBcfBbECC798ae9941104B0F6991134439c1c426");
        await network.provider.request({
            method: "hardhat_impersonateAccount",
            params: ["0x25aB3Efd52e6470681CE037cD546Dc60726948D3"],
        });
        let funder = await ethers.getSigner("0x25aB3Efd52e6470681CE037cD546Dc60726948D3")
 
        let tx = {
            to: user.address,
            value: ethers.utils.parseEther("1"),
        };
        await (await funder.sendTransaction(tx)).wait();
        let MAPOmnichainServiceV2 = await ethers.getContractFactory("MAPOmnichainServiceV2");
        let mos = MAPOmnichainServiceV2.attach("0xfeb2b97e4efce787c08086dc16ab69e063911380")
        console.log("owner",await mos.getAdmin());
        let i = await MAPOmnichainServiceV2.deploy();
        await i.deployed();
        await(await mos.connect(user).upgradeTo(i.address)).wait();
        console.log(await mos.getImplementation())

        let data = "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a6d6970000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000023200000000000000000000000000000000000000000000000000000000000002360000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000003d94800000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000008002000000000000800000000020044a000000100000000000000000000001000000000000000000000000000102000040000000202010200000000000015000004800001008800000204000080000000040000000000000000000000000020000000000000008008800200040000800008040000010010000000200020001020000000010000400002800000000000000000000000000000000020000000000000000000000000000000000000000000000000000000004000010001012000000000000000008000000000000000004000004000000010020000010008000080000000020020000000000000000002000100000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000003600000000000000000000000000000000000000000000000000000000000000540000000000000000000000000000000000000000000000000000000000000072000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000ae00000000000000000000000000000000000000000000000000000000000000cc00000000000000000000000000000000000000000000000000000000000000ea00000000000000000000000000000000000000000000000000000000000001080000000000000000000000000000000000000000000000000000000000000128000000000000000000000000000000000000000000000000000000000000014e00000000000000000000000000000000000000000000000000000000000001d80000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d6600000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e06391138000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000fc8d54a80e0facc51d6cb8dd2df61851932f8def000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000003a3529440000000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000002070813c9dca7020458095d8251d2a1268cfadf7eb8a1fd2054c571fca46fea90600000000000000000000000000000000000000000000000000000000000000205704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000048c273950000000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000c816bdd9c000000000000000000000000000e656bd52f9953b2688881644e3858fbe4c024627000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000207063ee7ac21ca792eb7d62d3a65598a5c986c4b0f7bd701aa453eb8a1387c9560000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e06391138000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a6d697000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000624e6f327c4f91f1fa6285711245c215de264d49000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000000206644f11ec136e82ae3a252660a2fea9e5d412868cd38474ba2ba564b8f19cb73000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000010680000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e06391138000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a6d697000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ca1cf8cebf88499429cca8f87cbca15ab8dafd06702259a5344ddce89ef3f3a5000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000058f80000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000006e05704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702a00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000014f6d226f9dc15d9bb51182815b320d3fbe324e1ba0000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000014bb21e441fb738f54e6ec244e435475096e179d6600000000000000000000000000000000000000000000000000000000000000000000000000000000000005400000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000004c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000a3bb08b3a15a19b4de82f8acfc862606fb69a2d000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000384efa064650000000000000000000000000000000000000000000000000000000000000020000000000000000000000000f6d226f9dc15d9bb51182815b320d3fbe324e1ba0000000000000000000000000a3bb08b3a15a19b4de82f8acfc862606fb69a2d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000040000000000000000000000001afa5d7f89743219576ef48a9826261be6378a680000000000000000000000001afa5d7f89743219576ef48a9826261be6378a680000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000000840000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000012475ceafe6000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f0000000000000000000000000000000000000000000000000000c816bdd9c000000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000ffffffff000000000000000000000000000000000000000000000000000000000000002bf6d226f9dc15d9bb51182815b320d3fbe324e1ba0027100a3bb08b3a15a19b4de82f8acfc862606fb69a2d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000020140fc1ae4910fc65859bbe978cf17402f862c5bd87a15aa3a0894d5aa50b0b0600000000000000000000000000000000000000000000000000000000000000205704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000020000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000000000000000000000000000000110d9316ec00000000000000000000000000000000000000000000000000000000000000058f8000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000014bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000000000000000000000000000002080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000109ef9109b822080b9109502f91091018303d948b901000000000000008002000000000000800000000020044a000000100000000000000000000001000000000000000000000000000102000040000000202010200000000000015000004800001008800000204000080000000040000000000000000000000000020000000000000008008800200040000800008040000010010000000200020001020000000010000400002800000000000000000000000000000000020000000000000000000000000000000000000000000000000000000004000010001012000000000000000008000000000000000004000004000000010020000010008000080000000020020000000000000000002000100000000000000000f90f86f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a00000000000000000000000000000000000000000000000000000000000000000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000000000000000000000000000000110d9316ec000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000fc8d54a80e0facc51d6cb8dd2df61851932f8defa000000000000000000000000000000000000000000000000000003a3529440000f89b94feb2b97e4efce787c08086dc16ab69e063911380f863a070813c9dca7020458095d8251d2a1268cfadf7eb8a1fd2054c571fca46fea906a05704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702aa0000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beba0000000000000000000000000000000000000000000000000000048c273950000f89b94b877e3562a660c7861117c2f1361a26abaf19bebf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000c816bdd9c000f8bc94e656bd52f9953b2688881644e3858fbe4c024627f863a07063ee7ac21ca792eb7d62d3a65598a5c986c4b0f7bd701aa453eb8a1387c956a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a6d697b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f8dd94624e6f327c4f91f1fa6285711245c215de264d49f884a06644f11ec136e82ae3a252660a2fea9e5d412868cd38474ba2ba564b8f19cb73a00000000000000000000000000000000000000000000000000000000000001068a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a6d697b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f9075d94feb2b97e4efce787c08086dc16ab69e063911380f863a0ca1cf8cebf88499429cca8f87cbca15ab8dafd06702259a5344ddce89ef3f3a5a000000000000000000000000000000000000000000000000000000000000058f8a00000000000000000000000000000000000000000000000000000000000001068b906e05704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702a00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000014f6d226f9dc15d9bb51182815b320d3fbe324e1ba0000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000014bb21e441fb738f54e6ec244e435475096e179d6600000000000000000000000000000000000000000000000000000000000000000000000000000000000005400000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000004c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000a3bb08b3a15a19b4de82f8acfc862606fb69a2d000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000384efa064650000000000000000000000000000000000000000000000000000000000000020000000000000000000000000f6d226f9dc15d9bb51182815b320d3fbe324e1ba0000000000000000000000000a3bb08b3a15a19b4de82f8acfc862606fb69a2d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000040000000000000000000000001afa5d7f89743219576ef48a9826261be6378a680000000000000000000000001afa5d7f89743219576ef48a9826261be6378a680000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000000840000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000012475ceafe6000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000002162b2aee2dd657fb131b28cc34dee6797b66f0000000000000000000000000000000000000000000000000000c816bdd9c000000000000000000000000000000000000000000000000000d4a8f2e2dfc1b52e00000000000000000000000000000000000000000000000000000000ffffffff000000000000000000000000000000000000000000000000000000000000002bf6d226f9dc15d9bb51182815b320d3fbe324e1ba0027100a3bb08b3a15a19b4de82f8acfc862606fb69a2d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9019e94bb21e441fb738f54e6ec244e435475096e179d66f884a0140fc1ae4910fc65859bbe978cf17402f862c5bd87a15aa3a0894d5aa50b0b06a05704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702aa0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19bebb90100000000000000000000000000b877e3562a660c7861117c2f1361a26abaf19beb000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000000000000000000000000000000110d9316ec00000000000000000000000000000000000000000000000000000000000000058f8000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000014bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000"
        
        let orderId = "0x5704abcba3653936f40904e6bd90face01a9b36aed15ce406960936f8640702a"
        expect(await mos.storedOrderId(orderId)).to.be.false;
        await(await mos.connect(user).verifyAndstore(22776,data)).wait(); 
        expect(await mos.storedOrderId(orderId)).to.be.true;
        await expect(mos.connect(user).verifyAndstore(22776,data)).to.be.revertedWith("orderId stored");
        expect(await mos.getStoredCount()).to.eq(1);
        let wbtc = await ethers.getContractAt(ERC20, "0xF6D226f9Dc15d9bB51182815b320D3fBE324e1bA",user);
        let before = await wbtc.balanceOf("0x200AEe9ba7040d778922A763CE8A50948d61AFF5")
        let result = await(await mos.swapInVerifiedLogs(1)).wait();
        expect(await mos.getStoredCount()).to.eq(0);
        expect(await mos.storedOrderId(orderId)).to.be.false;
        let after = await wbtc.balanceOf("0x200AEe9ba7040d778922A763CE8A50948d61AFF5")
        expect(after).gt(before);
    });

});
