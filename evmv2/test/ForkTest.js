let { BigNumber } = require("ethers");
const { expect } = require("chai");
const { ethers, network } = require("hardhat");

let ERC20 = [
    "function approve(address spender, uint256 amount) external returns (bool)",
    "function balanceOf(address account) external view returns (uint256)",
    "function transfer(address to, uint value) external returns (bool)",
];

//fork merlin
// to execute this modify block.chainid = 4200 in MAPOmnichainServiceV2.sol
// because fork chainId Cannot be set to 4200
describe("swapIn", function () {
    //
    it("swapIn", async () => {
        let user;

        this.timeout(0);
        await network.provider.request({
            method: "hardhat_reset",
            params: [
                {
                    forking: {
                        jsonRpcUrl: "https://ro-rpc.merlinchain.io/",
                        blockNumber: 7980660,
                    },
                },
            ],
        });

        await network.provider.request({
            method: "hardhat_impersonateAccount",
            params: ["0xbbcfbbecc798ae9941104b0f6991134439c1c426"],
        });
        user = await ethers.getSigner("0xBBcfBbECC798ae9941104B0F6991134439c1c426");
        await network.provider.request({
            method: "hardhat_impersonateAccount",
            params: ["0x25aB3Efd52e6470681CE037cD546Dc60726948D3"],
        });
        let funder = await ethers.getSigner("0x25aB3Efd52e6470681CE037cD546Dc60726948D3");

        let tx = {
            to: user.address,
            value: ethers.utils.parseEther("1"),
        };
        await (await funder.sendTransaction(tx)).wait();
        let MAPOmnichainServiceV2 = await ethers.getContractFactory("MAPOmnichainServiceV2");
        let mos = MAPOmnichainServiceV2.attach("0xfeb2b97e4efce787c08086dc16ab69e063911380");
        console.log("owner", await mos.getAdmin());
        let i = await MAPOmnichainServiceV2.deploy();
        await i.deployed();
        await (await mos.connect(user).upgradeTo(i.address)).wait();
        console.log(await mos.getImplementation());

        let proof =
            "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a72cf0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000001de00000000000000000000000000000000000000000000000000000000000001e20000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000037d1200000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000020800000000008000000000200442000000100000000000000000000201000000000000000000000000000002000042000080202000200000000000015000004900001008800000200000280010000040000000000000000020000000020000000000000008008800000040000000008000000010010000000000020001020000000010000000002800020000000000040000000000000000020000000000000000000000000000000000000000000000000000000004000010001012000000000000000000000000000000000004040004000000010020000010008000080000000020080000000000000000002000100000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000003600000000000000000000000000000000000000000000000000000000000000540000000000000000000000000000000000000000000000000000000000000072000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000ae00000000000000000000000000000000000000000000000000000000000000cc00000000000000000000000000000000000000000000000000000000000000ea00000000000000000000000000000000000000000000000000000000000001080000000000000000000000000000000000000000000000000000000000000128000000000000000000000000000000000000000000000000000000000000014e000000000000000000000000000000000000000000000000000000000000018400000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec0000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec0000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000208c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9250000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d660000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000110d9316ec0000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000fc8d54a80e0facc51d6cb8dd2df61851932f8def000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000003a3529440000000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000002070813c9dca7020458095d8251d2a1268cfadf7eb8a1fd2054c571fca46fea9060000000000000000000000000000000000000000000000000000000000000020d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e399697475135900000000000000000000000000000000000000000000000000000000000000200000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b30000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000048c2739500000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e0639113800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000c816bdd9c000000000000000000000000000e656bd52f9953b2688881644e3858fbe4c024627000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000207063ee7ac21ca792eb7d62d3a65598a5c986c4b0f7bd701aa453eb8a1387c9560000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e06391138000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a72cf0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000624e6f327c4f91f1fa6285711245c215de264d49000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000000206644f11ec136e82ae3a252660a2fea9e5d412868cd38474ba2ba564b8f19cb73000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000010680000000000000000000000000000000000000000000000000000000000000020000000000000000000000000feb2b97e4efce787c08086dc16ab69e06391138000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000a72cf0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020ca1cf8cebf88499429cca8f87cbca15ab8dafd06702259a5344ddce89ef3f3a5000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000058f80000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000001a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e399697475135900000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000014b880fd278198bd590252621d4cd071b1842e9bcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000020140fc1ae4910fc65859bbe978cf17402f862c5bd87a15aa3a0894d5aa50b0b060000000000000000000000000000000000000000000000000000000000000020d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e39969747513590000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff500000000000000000000000000000000000000000000000000000000000000200000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b300000000000000000000000000000000000000000000000000000000000001000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000000000000000000000000000000110d9316ec00000000000000000000000000000000000000000000000000000000000000058f8000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff500000000000000000000000000000000000000000000000000000000000000000000000000000000000000020800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000b5ef90b5b822080b90b5502f90b510183037d12b9010000000000000000020800000000008000000000200442000000100000000000000000000201000000000000000000000000000002000042000080202000200000000000015000004900001008800000200000280010000040000000000000000020000000020000000000000008008800000040000000008000000010010000000000020001020000000010000000002800020000000000040000000000000000020000000000000000000000000000000000000000000000000000000004000010001012000000000000000000000000000000000004040004000000010020000010008000080000000020080000000000000000002000100000000000000000f90a46f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a00000000000000000000000000000000000000000000000000000000000000000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000fc8d54a80e0facc51d6cb8dd2df61851932f8defa000000000000000000000000000000000000000000000000000003a3529440000f89b94feb2b97e4efce787c08086dc16ab69e063911380f863a070813c9dca7020458095d8251d2a1268cfadf7eb8a1fd2054c571fca46fea906a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e3996974751359a00000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3a0000000000000000000000000000000000000000000000000000048c273950000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000c816bdd9c000f8bc94e656bd52f9953b2688881644e3858fbe4c024627f863a07063ee7ac21ca792eb7d62d3a65598a5c986c4b0f7bd701aa453eb8a1387c956a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a72cf0b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f8dd94624e6f327c4f91f1fa6285711245c215de264d49f884a06644f11ec136e82ae3a252660a2fea9e5d412868cd38474ba2ba564b8f19cb73a00000000000000000000000000000000000000000000000000000000000001068a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a72cf0b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f9021d94feb2b97e4efce787c08086dc16ab69e063911380f863a0ca1cf8cebf88499429cca8f87cbca15ab8dafd06702259a5344ddce89ef3f3a5a000000000000000000000000000000000000000000000000000000000000058f8a00000000000000000000000000000000000000000000000000000000000001068b901a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e399697475135900000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000014b880fd278198bd590252621d4cd071b1842e9bcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9019e94bb21e441fb738f54e6ec244e435475096e179d66f884a0140fc1ae4910fc65859bbe978cf17402f862c5bd87a15aa3a0894d5aa50b0b06a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e3996974751359a0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a00000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3b901000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000000000000000000000000000000110d9316ec00000000000000000000000000000000000000000000000000000000000000058f8000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000";

        let logs =
            "0xf90a46f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a00000000000000000000000000000000000000000000000000000000000000000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a08c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000bb21e441fb738f54e6ec244e435475096e179d66a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000000000000000000000000000000110d9316ec000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a0000000000000000000000000fc8d54a80e0facc51d6cb8dd2df61851932f8defa000000000000000000000000000000000000000000000000000003a3529440000f89b94feb2b97e4efce787c08086dc16ab69e063911380f863a070813c9dca7020458095d8251d2a1268cfadf7eb8a1fd2054c571fca46fea906a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e3996974751359a00000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3a0000000000000000000000000000000000000000000000000000048c273950000f89b941d22c0ab633f393c84a98cf4f2fad10ba47bb7b3f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000c816bdd9c000f8bc94e656bd52f9953b2688881644e3858fbe4c024627f863a07063ee7ac21ca792eb7d62d3a65598a5c986c4b0f7bd701aa453eb8a1387c956a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a72cf0b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f8dd94624e6f327c4f91f1fa6285711245c215de264d49f884a06644f11ec136e82ae3a252660a2fea9e5d412868cd38474ba2ba564b8f19cb73a00000000000000000000000000000000000000000000000000000000000001068a0000000000000000000000000feb2b97e4efce787c08086dc16ab69e063911380a00000000000000000000000000000000000000000000000000000000000a72cf0b84000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000f9021d94feb2b97e4efce787c08086dc16ab69e063911380f863a0ca1cf8cebf88499429cca8f87cbca15ab8dafd06702259a5344ddce89ef3f3a5a000000000000000000000000000000000000000000000000000000000000058f8a00000000000000000000000000000000000000000000000000000000000001068b901a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e399697475135900000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000c816bdd9c00000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000014b880fd278198bd590252621d4cd071b1842e9bcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9019e94bb21e441fb738f54e6ec244e435475096e179d66f884a0140fc1ae4910fc65859bbe978cf17402f862c5bd87a15aa3a0894d5aa50b0b06a0d51e800c05a80f69da020f6f77800bc21e17dbd85110aa6414e3996974751359a0000000000000000000000000200aee9ba7040d778922a763ce8a50948d61aff5a00000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3b901000000000000000000000000001d22c0ab633f393c84a98cf4f2fad10ba47bb7b3000000000000000000000000000000000000000000000000000110d9316ec000000000000000000000000000000000000000000000000000000110d9316ec00000000000000000000000000000000000000000000000000000000000000058f8000000000000000000000000000000000000000000000000000000000000106800000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000014200aee9ba7040d778922a763ce8a50948d61aff5000000000000000000000000";

        let hash = "0xeb698f7d853435ac10282cab87dd36abcc041f02c694faecdf753a4cc8d22ad0";
        expect(await mos.verifiedLogsHash(hash)).to.be.false;
        await expect(mos.connect(user).swapInVerified(logs)).to.be.revertedWith("not verified");
        await (await mos.connect(user).swapInVerify(22776, proof)).wait();
        expect(await mos.verifiedLogsHash(hash)).to.be.true;
        let wbtc = await ethers.getContractAt(ERC20, "0xB880fd278198bd590252621d4CD071b1842E9Bcd", user);
        let before = await wbtc.balanceOf("0x200AEe9ba7040d778922A763CE8A50948d61AFF5");
        await (await mos.connect(user).swapInVerified(logs)).wait();
        let after = await wbtc.balanceOf("0x200AEe9ba7040d778922A763CE8A50948d61AFF5");
        console.log(before);
        console.log(after);
        expect(after).gt(before);
    });
});
